<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core_rt" %>
<%@taglib prefix="shiro" uri="http://shiro.apache.org/tags" %>

<form id="pagerForm" method="post" action="user/list">
    <input type="hidden" name="pageNum" value="${pageBean.pageNum}" />
    <input type="hidden" name="numPerPage" value="${pageBean.pageSize}" />
</form>

<div class="pageHeader">
    <form onsubmit="return navTabSearch(this);" action="user/list" method="post">
        <div class="searchBar">
            <table class="searchContent">
                <tr>
                    <td>
                        用户名称：
                        <input type="text" name="fullName" value="${param.fullName}" class="textInput">
                    </td>
                </tr>
            </table>
            <div class="subBar">
                <ul>
                    <li><div class="buttonActive"><div class="buttonContent"><button type="submit">检索</button></div></div></li>
                    <li><div class="button"><div class="buttonContent"><button type="button" onclick="resetAll(this)">清空重输</button></div></div></li>
                </ul>
            </div>
        </div>
    </form>
</div>
<div class="pageContent">
    <div class="panelBar">
        <ul class="toolBar">
            <li><a class="add" href="user/detail" mask="true"
                                    target="dialog" title="新增用户" rel="userAdd"  height="400">
                <i class="fa fa-plus-square fa-lg fa-fw"></i><label>新增</label></a></li>
            <li><a class="edit" href="user/detail?userId={userId}" mask="true"
                                    target="dialog" title="修改用户" rel="userEdit" height="400">
                <i class="fa fa-pencil fa-lg fa-fw"></i><label>修改</label></a></li>
            <li><a class="delete" href="user/delete?userId={userId}" mask="true"
                   target="ajaxTodo" title="删除用户" rel="userDelete"><i class="fa fa-trash-o fa-lg fa-fw"></i><label>删除</label></a></li>
            <li><a class="edit" title="分配角色" href="role/listRole?userId={userId}" mask="true"
                                    target="dialog" height="500" width="800" title="分配角色" rel="roleLoad">
                <i class="fa fa-cog fa-lg fa-fw"></i><label>分配角色</label></a></li>
            <li><a class="edit" title="重置密码" href="user/resetPwd?userId={userId}" mask="true"
                   target="ajaxTodo"  title="重置密码"><i class="fa fa-retweet fa-lg fa-fw"></i><label>重置密码</label></a></li>

        </ul>
    </div>
    <table class="list" width="100%" layoutH="115">
        <thead>
        <tr>
            <th width="50">登陆用户名</th>
            <th width="100">用户名称</th>
            <th width="100">手机号码</th>
            <th width="100">路段名称</th>
            <th width="100">站名称</th>
            <th width="100">状态</th>
            <th width="80">是否超级管理员</th>
        </tr>
        </thead>
        <tbody>
        <c:forEach var="item" items="${pageBean.list}">
            <tr target="userId" rel="${item.userId}">
                <td>${item.loginName}</td>
                <td>${item.fullName}</td>
                <td>${item.mobile}</td>
                <td>${item.roadName}</td>
                <td>${item.stationName}</td>
                <td>${item.status eq 0?'锁定':"正常"}</td>
                <td>${item.isAdmin eq 0?'否':"是"}</td>
            </tr>
        </c:forEach>
        </tbody>
    </table>
    <div class="panelBar">
        <div class="pages">
            <span>显示</span>
            <select class="combox" name="numPerPage" onchange="navTabPageBreak({numPerPage:this.value})">
                <option value="20" ${pageBean.pageSize == 20?"selected":""}>20</option>
                <option value="50" ${pageBean.pageSize == 50?"selected":""}>50</option>
                <option value="100" ${pageBean.pageSize == 100?"selected":""}>100</option>
                <option value="200" ${pageBean.pageSize == 200?"selected":""}>200</option>
            </select>
            <span>条，共${pageBean.total}条</span>
        </div>

        <div class="pagination" targetType="navTab" totalCount="${pageBean.total}"
             numPerPage="${pageBean.pageSize}" pageNumShown="10" currentPage="${pageBean.pageNum }"></div>

    </div>
</div>
